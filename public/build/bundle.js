var app=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){var t=this;r(this,e),this.CSS={notesMenuLoading:"notes-list--loading"};var n=document.querySelector('[name="js-notes-menu"]');n.classList.add(this.CSS.notesMenuLoading),window.ipcRenderer.send("load notes list"),window.ipcRenderer.on("update notes list",function(r,o){var i=o.notes;n.classList.remove(t.CSS.notesMenuLoading),i.forEach(e.addMenuItem)}),document.querySelector('[name="js-new-note-button"]').addEventListener("click",function(){return t.newNoteButtonClicked.call(t)})}return o(e,[{key:"newNoteButtonClicked",value:function(){window.setTimeout(function(){document.querySelector(".ce-redactor").click()},10),u.clear()}}],[{key:"addMenuItem",value:function(t){var n=document.querySelector('[name="js-notes-menu"]'),r=n.querySelector('[data-id="'+t.id+'"]'),o=t.title;if(o.length>68&&(o=o.substring(0,68)+"â€¦"),r)return void(r.textContent=o);var i=a.make("li",null,{textContent:o});i.dataset.id=t.id,n.insertAdjacentElement("afterbegin",i),i.addEventListener("click",e.menuItemClicked)}},{key:"removeMenuItem",value:function(e){var t=document.querySelector('[name="js-notes-menu"]'),n=t.querySelector('[data-id="'+e+'"]');n&&n.remove()}},{key:"menuItemClicked",value:function(){var e=this,t=e.dataset.id,n=window.ipcRenderer.sendSync("get note",{id:t});u.render(n),document.querySelector('[name="editor-view"]').scrollIntoView()}}]),e}();t.default=i;var a=n(2).default,u=n(1).default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"autosave",value:function(){this.autosaveTimer&&window.clearTimeout(this.autosaveTimer),this.autosaveTimer=window.setTimeout(e.save,500)}},{key:"enableAutosave",value:function(){codex.editor.nodes.redactor.addEventListener("keyup",this.autosave.bind(this))}},{key:"disableAutosave",value:function(){codex.editor.nodes.redactor.removeEventListener("keyup",this.autosave.bind(this))}}],[{key:"save",value:function(){u.get("delete-button").classList.remove("hide"),codex.editor.saver.save().then(function(e){var t={data:e,title:window.NOTE_TITLE.value},n=document.getElementById("save-indicator");n.classList.add("saved"),window.setTimeout(function(){n.classList.remove("saved")},500),window.ipcRenderer.send("save note",{note:t})})}},{key:"addToMenu",value:function(e,t){var n=t.note;codex.editor.state.blocks.id=n.id,a.addMenuItem(n)}},{key:"render",value:function(e){codex.editor.content.clear(!0),window.NOTE_TITLE.value=e.title;var t=new Date(e.data.time);window.NOTE_DATE.textContent=t.toLocaleDateString("en-US",{day:"numeric",month:"short",hour:"numeric",minute:"numeric",hour12:!1}),codex.editor.content.load(e.data),u.get("delete-button").classList.remove("hide")}},{key:"clear",value:function(){codex.editor.content.clear(!0),window.NOTE_TITLE.value="",window.NOTE_DATE.textContent="",codex.editor.ui.addInitialBlock(),u.get("delete-button").classList.add("hide")}},{key:"delete",value:function(){var t=codex.editor.state.blocks.id;if(t){if(!window.ipcRenderer.sendSync("delete note",{id:t}))return!1;e.clear(),a.removeMenuItem(t)}}}]),e}();t.default=i;var a=n(0).default,u=n(2).default},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){o(this,e)}return i(e,null,[{key:"make",value:function(e,t,n){var o=document.createElement(e);if(Array.isArray(t)){var i;(i=o.classList).add.apply(i,r(t))}else t&&o.classList.add(t);for(var a in n)o[a]=n[a];return o}},{key:"replace",value:function(e,t){return e.parentNode.replaceChild(t,e)}},{key:"get",value:function(e){return document.getElementById(e)}}]),e}();t.default=a},function(e,t){},function(e,t){e.exports=require("electron")},function(e,t,n){"use strict";var r=n(4);window.ipcRenderer=r.ipcRenderer,r.webFrame.setZoomLevelLimits(1,1),n(3);var o=function(){var e=n(1).default,t=n(0).default,r=n(7).default;new t,window.ipcRenderer.on("note saved",e.addToMenu),window.NOTE_TITLE=document.getElementById("note-title"),window.NOTE_DATE=document.getElementById("note-date");var o=document.getElementsByClassName("js-autoresizable"),i=new e;new r(o);i.enableAutosave()},i=function(e){if("A"===e.target.tagName&&e.target.href)return e.target.closest(".editor")?void((e.metaKey||e.ctrlKey)&&r.shell.openExternal(e.target.href)):void r.shell.openExternal(e.target.href)};e.exports=function(){return document.addEventListener("DOMContentLoaded",o,!1),document.addEventListener("click",i),{Note:n(1).default,Aside:n(0).default}}()},,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e),this.elements=t||[];for(var n=0;n<this.elements.length;n++)this.addResizer(this.elements[n])}return o(e,[{key:"addResizer",value:function(e){e.addEventListener("keydown",function(e){13==e.keyCode&&e.preventDefault()},!1),e.addEventListener("input",function(t){e.style.height="auto",e.style.height=e.scrollHeight+"px"},!1)}},{key:"removeResizer",value:function(e){e.removeEventListener("keydown"),e.removeEventListener("input")}},{key:"destroy",value:function(){for(var e=0;e<this.elements.length;e++)this.removeResizer(this.elements[e]);this.elements=[]}}]),e}();t.default=i}]);