{"version":3,"sources":["webpack:///webpack/bootstrap 2fc7950a46ded89c9605","webpack:///./public/javascripts/aside.js","webpack:///./public/javascripts/note.js","webpack:///./public/javascripts/dom.js","webpack:///./public/stylesheets/base.css","webpack:///external \"electron\"","webpack:///./public/javascripts/app.js"],"names":["Aside","CSS","notesMenuLoading","notesMenu","document","querySelector","classList","add","window","ipcRenderer","send","on","event","notes","remove","forEach","addMenuItem","newNoteButton","addEventListener","newNoteButtonClicked","call","Note","clear","noteData","existingNote","id","textContent","title","menuItem","dom","make","dataset","insertAdjacentElement","menuItemClicked","itemId","sendSync","render","require","default","DELETE_BUTTON_ID","autosaveTimer","clearTimeout","setTimeout","save","codex","editor","nodes","redactor","autosave","bind","removeEventListener","get","saver","then","note","state","blocks","content","load","ui","addInitialBlock","removeMenuItem","DOM","tagName","classNames","attributes","el","createElement","Array","isArray","attrName","nodeToReplace","replaceWith","parentNode","replaceChild","elementId","getElementById","electron","webFrame","setZoomLevelLimits","documentReady","addToMenu","enableAutosave","module","exports"],"mappings":"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","file":"./public/build/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2fc7950a46ded89c9605","/**\n * Aside column module\n */\nexport default class Aside {\n\n  /**\n  * @constructor\n  * @property {object} CSS dictionary\n  */\n  constructor() {\n    /**\n     * Make CSS dictionary\n     * @type {Object}\n     */\n    this.CSS = {\n      notesMenuLoading: 'notes-list--loading'\n    };\n\n    /**\n     * Find notes list holder\n     * @type {Element}\n     */\n    let notesMenu = document.querySelector('[name=\"js-notes-menu\"]');\n\n    /**\n     * Show preloader\n     */\n    notesMenu.classList.add(this.CSS.notesMenuLoading);\n\n    /**\n     * Emit message to load list\n     */\n    window.ipcRenderer.send('load notes list');\n\n    /**\n     * Update notes list\n     */\n    window.ipcRenderer.on('update notes list', (event, {notes}) => {\n      notesMenu.classList.remove(this.CSS.notesMenuLoading);\n      notes.forEach(Aside.addMenuItem);\n    });\n\n    /**\n     * Activate new note button\n     */\n    let newNoteButton = document.querySelector('[name=\"js-new-note-button\"]');\n\n    newNoteButton.addEventListener('click', () => this.newNoteButtonClicked.call(this) );\n  }\n\n  /**\n   * New note button click handler\n   * @this {Aside}\n   */\n  newNoteButtonClicked() {\n    Note.clear();\n  }\n\n  /**\n   *\n   * Add note to left menu\n   *\n   * @param note\n   */\n  static addMenuItem(noteData) {\n    let notesMenu = document.querySelector('[name=\"js-notes-menu\"]');\n\n    let existingNote = notesMenu.querySelector('[data-id=\"' + noteData.id + '\"]');\n\n    if (existingNote) {\n      existingNote.textContent = noteData.title;\n      return;\n    }\n\n    let menuItem = dom.make('li', null, {\n      textContent: noteData.title\n    });\n\n    menuItem.dataset.id = noteData.id;\n\n    notesMenu.insertAdjacentElement('afterbegin', menuItem);\n\n    menuItem.addEventListener('click', Aside.menuItemClicked);\n  }\n\n  /**\n   * Remove item from menu\n   *\n   * @param itemId\n   */\n  static removeMenuItem(itemId) {\n    let notesMenu = document.querySelector('[name=\"js-notes-menu\"]');\n\n    let existingNote = notesMenu.querySelector('[data-id=\"' + itemId + '\"]');\n\n    if (existingNote) existingNote.remove();\n  }\n\n  /**\n   * Note in aside menu click listener\n   * @this {Element}\n   */\n  static menuItemClicked() {\n    let menuItem = this,\n        id = menuItem.dataset.id;\n\n    let noteData = window.ipcRenderer.sendSync('get note', {id});\n\n    Note.render(noteData);\n  }\n}\n\nlet dom = require('./dom').default;\nlet Note = require('./note').default;\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/aside.js","const DELETE_BUTTON_ID = 'delete-button';\n\n/**\n * Note\n */\nexport default class Note {\n\n  /**\n   * Send note data to backend\n   * @static\n   */\n  static save() {\n    dom.get(DELETE_BUTTON_ID).classList.remove('hide');\n\n    codex.editor.saver.save()\n      .then(function (noteData) {\n        window.ipcRenderer.send('save note', {noteData});\n      });\n  }\n\n  /**\n   *  Keyup event on editor zone fires timeout to autosave note\n   */\n  autosave() {\n    if (this.autosaveTimer) window.clearTimeout(this.autosaveTimer);\n\n    this.autosaveTimer = window.setTimeout(Note.save, 200);\n  }\n\n  /**\n   * Add keyup listener to editor zone\n   */\n  enableAutosave() {\n    codex.editor.nodes.redactor.addEventListener('keyup', this.autosave.bind(this));\n  }\n\n  /**\n   * Remove keyup listener to editor zone\n   */\n  disableAutosave() {\n    codex.editor.nodes.redactor.removeEventListener('keyup', this.autosave.bind(this));\n  }\n\n  /**\n   *  Add note to menu by Aside.addMenuItem method\n   *\n   * @param event\n   * @param data\n   */\n  static addToMenu(event, {note}) {\n    codex.editor.state.blocks.id = note.id;\n\n    Aside.addMenuItem(note);\n  }\n\n  /**\n   * Renders note\n   * @param  {object} noteData\n   */\n  static render(noteData) {\n    codex.editor.content.clear(true);\n\n    codex.editor.content.load(noteData);\n    dom.get(DELETE_BUTTON_ID).classList.remove('hide');\n  }\n\n  /**\n   * Clears editor\n   */\n  static clear() {\n    codex.editor.content.clear(true);\n    codex.editor.ui.addInitialBlock();\n    dom.get(DELETE_BUTTON_ID).classList.add('hide');\n  }\n\n  /**\n   * Delete article\n   */\n  static delete() {\n    let id = codex.editor.state.blocks.id;\n\n    if (!id) {\n      return;\n    }\n\n    if (!window.ipcRenderer.sendSync('delete note', {id}))\n      return false;\n\n    Note.clear();\n    Aside.removeMenuItem(id);\n  }\n\n}\n\nlet Aside = require('./aside').default;\nlet dom = require('./dom').default;\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/note.js","/**\n * DOM manipulations methods\n */\nexport default class DOM {\n  /**\n   * Helper for making Elements with classname and attributes\n   * @param  {string} tagName           - new Element tag name\n   * @param  {array|string} classNames  - list or name of CSS classname(s)\n   * @param  {Object} attributes        - any attributes\n   * @return {Element}\n   */\n  static make(tagName, classNames, attributes) {\n    var el = document.createElement(tagName);\n\n    if ( Array.isArray(classNames) ) {\n      el.classList.add(...classNames);\n    } else if( classNames ) {\n      el.classList.add(classNames);\n    }\n\n    for (let attrName in attributes) {\n      el[attrName] = attributes[attrName];\n    }\n\n    return el;\n  }\n\n  /**\n  * Replaces node with\n  * @param {Element} nodeToReplace\n  * @param {Element} replaceWith\n  */\n  static replace(nodeToReplace, replaceWith) {\n    return nodeToReplace.parentNode.replaceChild(replaceWith, nodeToReplace);\n  }\n\n  /**\n  * getElementById alias\n  * @param {String} elementId\n  */\n  static get(elementId) {\n    return document.getElementById(elementId);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/dom.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./public/stylesheets/base.css\n// module id = 3\n// module chunks = 0","module.exports = require(\"electron\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"electron\"\n// module id = 4\n// module chunks = 0","'use strict';\n\nconst electron = require('electron');\n\nwindow.ipcRenderer = electron.ipcRenderer;\n\n/**\n * Disable zoom\n */\nelectron.webFrame.setZoomLevelLimits(1, 1);\n\n/**\n * Load CSS\n */\nrequire('../stylesheets/base.css');\n\n/**\n * Document ready callback\n */\nlet documentReady = () => {\n  /**\n   * Init aside module\n   */\n  let Note = require('./note').default;\n  let Aside = require('./aside').default;\n\n  new Aside();\n\n  window.ipcRenderer.on('note saved', Note.addToMenu);\n\n  let note = new Note();\n\n  note.enableAutosave();\n};\n\n/**\n * Application\n */\nmodule.exports = function () {\n  document.addEventListener('DOMContentLoaded', documentReady, false);\n  let Note = require('./note').default;\n  let Aside = require('./aside').default;\n\n  return {\n    Note: Note,\n    Aside: Aside\n  };;\n}();\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/app.js"],"sourceRoot":""}