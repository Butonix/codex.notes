<<<<<<< HEAD
{"version":3,"sources":["webpack:///webpack/bootstrap bbbe3611959a9dbe7a3e","webpack:///./public/javascripts/aside.js","webpack:///./public/javascripts/note.js","webpack:///./public/javascripts/dom.js","webpack:///./public/stylesheets/base.css","webpack:///external \"electron\"","webpack:///./public/javascripts/app.js"],"names":["Aside","CSS","notesMenuLoading","notesMenu","document","querySelector","classList","add","window","ipcRenderer","send","on","event","notes","remove","forEach","addMenuItem","newNoteButton","addEventListener","newNoteButtonClicked","call","setTimeout","editor","click","Note","clear","noteData","titleMaxLength","existingNote","id","noteTitle","title","length","substring","textContent","menuItem","dom","make","dataset","insertAdjacentElement","menuItemClicked","itemId","sendSync","render","editorView","scrollIntoView","require","default","DELETE_BUTTON_ID","autosaveTimer","clearTimeout","save","codex","nodes","redactor","autosave","bind","removeEventListener","get","saver","then","note","data","NOTE_TITLE","value","saveIndicator","getElementById","state","blocks","content","saveDate","Date","time","NOTE_DATE","toLocaleDateString","day","month","hour","minute","hour12","load","ui","addInitialBlock","removeMenuItem","DOM","tagName","classNames","attributes","el","createElement","Array","isArray","attrName","nodeToReplace","replaceWith","parentNode","replaceChild","elementId","electron","webFrame","setZoomLevelLimits","documentReady","addToMenu","enableAutosave","openExternalLink","target","href","closest","shell","openExternal","metaKey","ctrlKey","module","exports"],"mappings":"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","file":"./public/build/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bbbe3611959a9dbe7a3e","/**\n * Aside column module\n */\nexport default class Aside {\n\n  /**\n  * @constructor\n  * @property {object} CSS dictionary\n  */\n  constructor() {\n    /**\n     * Make CSS dictionary\n     * @type {Object}\n     */\n    this.CSS = {\n      notesMenuLoading: 'notes-list--loading'\n    };\n\n    /**\n     * Find notes list holder\n     * @type {Element}\n     */\n    let notesMenu = document.querySelector('[name=\"js-notes-menu\"]');\n\n    /**\n     * Show preloader\n     */\n    notesMenu.classList.add(this.CSS.notesMenuLoading);\n\n    /**\n     * Emit message to load list\n     */\n    window.ipcRenderer.send('load notes list');\n\n    /**\n     * Update notes list\n     */\n    window.ipcRenderer.on('update notes list', (event, {notes}) => {\n      notesMenu.classList.remove(this.CSS.notesMenuLoading);\n      notes.forEach(Aside.addMenuItem);\n    });\n\n    /**\n     * Activate new note button\n     */\n    let newNoteButton = document.querySelector('[name=\"js-new-note-button\"]');\n\n    newNoteButton.addEventListener('click', () => this.newNoteButtonClicked.call(this) );\n  }\n\n  /**\n   * New note button click handler\n   * @this {Aside}\n   */\n  newNoteButtonClicked() {\n    /**\n     * Set focus to the Editor\n     */\n    window.setTimeout(function () {\n      let editor = document.querySelector('.ce-redactor');\n\n      editor.click();\n    }, 10);\n    Note.clear();\n  }\n\n  /**\n   *\n   * Add note to left menu\n   *\n   * @param {object} noteData\n   * @param {string} noteData.title\n   */\n  static addMenuItem(noteData) {\n    /**\n     * Maximum chars at the node title\n     * @type {Number}\n     */\n    const titleMaxLength = 68;\n\n    let notesMenu = document.querySelector('[name=\"js-notes-menu\"]');\n    let existingNote = notesMenu.querySelector('[data-id=\"' + noteData.id + '\"]');\n\n    let noteTitle = noteData.title;\n\n    if ( noteTitle.length > titleMaxLength ) {\n      noteTitle = noteTitle.substring(0, titleMaxLength) + '…';\n    }\n\n    if (existingNote) {\n      existingNote.textContent = noteTitle;\n      return;\n    }\n\n    let menuItem = dom.make('li', null, {\n      textContent: noteTitle\n    });\n\n    menuItem.dataset.id = noteData.id;\n\n    notesMenu.insertAdjacentElement('afterbegin', menuItem);\n\n    menuItem.addEventListener('click', Aside.menuItemClicked);\n  }\n\n  /**\n   * Remove item from menu\n   *\n   * @param itemId\n   */\n  static removeMenuItem(itemId) {\n    let notesMenu = document.querySelector('[name=\"js-notes-menu\"]');\n\n    let existingNote = notesMenu.querySelector('[data-id=\"' + itemId + '\"]');\n\n    if (existingNote) existingNote.remove();\n  }\n\n  /**\n   * Note in aside menu click listener\n   * @this {Element}\n   */\n  static menuItemClicked() {\n    let menuItem = this,\n        id = menuItem.dataset.id;\n\n    let noteData = window.ipcRenderer.sendSync('get note', {id});\n\n    Note.render(noteData);\n\n    /**\n     * Scroll to top\n     */\n    let editorView = document.querySelector('[name=\"editor-view\"]');\n\n    editorView.scrollIntoView();\n  }\n}\n\nlet dom = require('./dom').default;\nlet Note = require('./note').default;\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/aside.js","const DELETE_BUTTON_ID = 'delete-button';\n\n/**\n * Note\n */\nexport default class Note {\n\n  /**\n   * Send note data to backend\n   * @static\n   */\n  static save() {\n    dom.get(DELETE_BUTTON_ID).classList.remove('hide');\n\n    codex.editor.saver.save()\n      .then(function (noteData) {\n        let note = {\n          data: noteData,\n          title: window.NOTE_TITLE.value\n        };\n\n        let saveIndicator = document.getElementById('save-indicator');\n\n        saveIndicator.classList.add('saved');\n        window.setTimeout(() => {\n          saveIndicator.classList.remove('saved');\n        }, 500);\n        window.ipcRenderer.send('save note', {note});\n      });\n  }\n\n  /**\n   *  Keyup event on editor zone fires timeout to autosave note\n   */\n  autosave() {\n    if (this.autosaveTimer) window.clearTimeout(this.autosaveTimer);\n\n    this.autosaveTimer = window.setTimeout(Note.save, 500);\n  }\n\n  /**\n   * Add keyup listener to editor zone\n   */\n  enableAutosave() {\n    codex.editor.nodes.redactor.addEventListener('keyup', this.autosave.bind(this));\n  }\n\n  /**\n   * Remove keyup listener to editor zone\n   */\n  disableAutosave() {\n    codex.editor.nodes.redactor.removeEventListener('keyup', this.autosave.bind(this));\n  }\n\n  /**\n   *  Add note to menu by Aside.addMenuItem method\n   *\n   * @param event\n   * @param data\n   */\n  static addToMenu(event, {note}) {\n    codex.editor.state.blocks.id = note.id;\n\n    Aside.addMenuItem(note);\n  }\n\n  /**\n   * Renders note\n   * @param  {object} noteData\n   */\n  static render(note) {\n    codex.editor.content.clear(true);\n    window.NOTE_TITLE.value = note.title;\n\n    let saveDate = new Date(note.data.time);\n\n    window.NOTE_DATE.textContent = saveDate.toLocaleDateString('en-US', {\n      day: 'numeric',\n      month: 'short',\n      hour: 'numeric',\n      minute: 'numeric',\n      hour12: false\n    });\n    codex.editor.content.load(note.data);\n    dom.get(DELETE_BUTTON_ID).classList.remove('hide');\n  }\n\n  /**\n   * Clears editor\n   */\n  static clear() {\n    codex.editor.content.clear(true);\n    window.NOTE_TITLE.value = '';\n    window.NOTE_DATE.textContent = '';\n    codex.editor.ui.addInitialBlock();\n    dom.get(DELETE_BUTTON_ID).classList.add('hide');\n  }\n\n  /**\n   * Delete article\n   */\n  static delete() {\n    let id = codex.editor.state.blocks.id;\n\n    if (!id) {\n      return;\n    }\n\n    if (!window.ipcRenderer.sendSync('delete note', {id})) {\n      return false;\n    }\n\n    Note.clear();\n    Aside.removeMenuItem(id);\n  }\n\n}\n\nlet Aside = require('./aside').default;\nlet dom = require('./dom').default;\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/note.js","/**\n * DOM manipulations methods\n */\nexport default class DOM {\n  /**\n   * Helper for making Elements with classname and attributes\n   * @param  {string} tagName           - new Element tag name\n   * @param  {array|string} classNames  - list or name of CSS classname(s)\n   * @param  {Object} attributes        - any attributes\n   * @return {Element}\n   */\n  static make(tagName, classNames, attributes) {\n    var el = document.createElement(tagName);\n\n    if ( Array.isArray(classNames) ) {\n      el.classList.add(...classNames);\n    } else if( classNames ) {\n      el.classList.add(classNames);\n    }\n\n    for (let attrName in attributes) {\n      el[attrName] = attributes[attrName];\n    }\n\n    return el;\n  }\n\n  /**\n  * Replaces node with\n  * @param {Element} nodeToReplace\n  * @param {Element} replaceWith\n  */\n  static replace(nodeToReplace, replaceWith) {\n    return nodeToReplace.parentNode.replaceChild(replaceWith, nodeToReplace);\n  }\n\n  /**\n  * getElementById alias\n  * @param {String} elementId\n  */\n  static get(elementId) {\n    return document.getElementById(elementId);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/dom.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./public/stylesheets/base.css\n// module id = 3\n// module chunks = 0","module.exports = require(\"electron\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"electron\"\n// module id = 4\n// module chunks = 0","'use strict';\n\nconst electron = require('electron');\n\nwindow.ipcRenderer = electron.ipcRenderer;\n\n/**\n * Disable zoom\n */\nelectron.webFrame.setZoomLevelLimits(1, 1);\n\n/**\n * Load CSS\n */\nrequire('../stylesheets/base.css');\n\n/**\n * Document ready callback\n */\nlet documentReady = () => {\n  /**\n   * Init aside module\n   */\n  let Note = require('./note').default;\n  let Aside = require('./aside').default;\n\n  new Aside();\n\n  window.ipcRenderer.on('note saved', Note.addToMenu);\n  window.NOTE_TITLE = document.getElementById('note-title');\n  window.NOTE_DATE = document.getElementById('note-date');\n\n  let note = new Note();\n\n  note.enableAutosave();\n};\n\nlet openExternalLink = function (event) {\n  if (event.target.tagName !== 'A' || !event.target.href) {\n    return;\n  }\n\n  if (!event.target.closest('.editor')) {\n    electron.shell.openExternal(event.target.href);\n    return;\n  }\n\n  if (event.metaKey || event.ctrlKey) {\n    electron.shell.openExternal(event.target.href);\n  }\n};\n\n/**\n * Application\n */\nmodule.exports = function () {\n  document.addEventListener('DOMContentLoaded', documentReady, false);\n  document.addEventListener('click', openExternalLink);\n  let Note = require('./note').default;\n  let Aside = require('./aside').default;\n\n  return {\n    Note: Note,\n    Aside: Aside\n  };\n}();\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/app.js"],"sourceRoot":""}
=======
{"version":3,"sources":["webpack:///webpack/bootstrap ed7416fc6dfd1ba4e8aa","webpack:///./public/javascripts/aside.js","webpack:///./public/javascripts/note.js","webpack:///./public/javascripts/dom.js","webpack:///./public/stylesheets/base.css","webpack:///external \"electron\"","webpack:///./public/javascripts/app.js"],"names":["Aside","CSS","notesMenuLoading","notesMenu","document","querySelector","classList","add","window","ipcRenderer","send","on","event","notes","remove","forEach","addMenuItem","newNoteButton","addEventListener","newNoteButtonClicked","call","setTimeout","editor","click","Note","clear","noteData","titleMaxLength","existingNote","id","noteTitle","title","length","substring","textContent","menuItem","dom","make","dataset","insertAdjacentElement","menuItemClicked","itemId","sendSync","render","editorView","scrollIntoView","require","default","DELETE_BUTTON_ID","autosaveTimer","clearTimeout","save","codex","nodes","redactor","autosave","bind","removeEventListener","get","saver","then","note","data","NOTE_TITLE","value","saveIndicator","getElementById","state","blocks","content","saveDate","Date","time","NOTE_DATE","toLocaleDateString","day","month","hour","minute","hour12","load","ui","addInitialBlock","removeMenuItem","DOM","tagName","classNames","attributes","el","createElement","Array","isArray","attrName","nodeToReplace","replaceWith","parentNode","replaceChild","elementId","electron","webFrame","setZoomLevelLimits","documentReady","addToMenu","enableAutosave","openExternalLink","target","href","closest","shell","openExternal","metaKey","ctrlKey","module","exports"],"mappings":"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","file":"./public/build/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ed7416fc6dfd1ba4e8aa","/**\n * Aside column module\n */\nexport default class Aside {\n\n  /**\n  * @constructor\n  * @property {object} CSS dictionary\n  */\n  constructor() {\n    /**\n     * Make CSS dictionary\n     * @type {Object}\n     */\n    this.CSS = {\n      notesMenuLoading: 'notes-list--loading'\n    };\n\n    /**\n     * Find notes list holder\n     * @type {Element}\n     */\n    let notesMenu = document.querySelector('[name=\"js-notes-menu\"]');\n\n    /**\n     * Show preloader\n     */\n    notesMenu.classList.add(this.CSS.notesMenuLoading);\n\n    /**\n     * Emit message to load list\n     */\n    window.ipcRenderer.send('load notes list');\n\n    /**\n     * Update notes list\n     */\n    window.ipcRenderer.on('update notes list', (event, {notes}) => {\n      notesMenu.classList.remove(this.CSS.notesMenuLoading);\n      notes.forEach(Aside.addMenuItem);\n    });\n\n    /**\n     * Activate new note button\n     */\n    let newNoteButton = document.querySelector('[name=\"js-new-note-button\"]');\n\n    newNoteButton.addEventListener('click', () => this.newNoteButtonClicked.call(this) );\n  }\n\n  /**\n   * New note button click handler\n   * @this {Aside}\n   */\n  newNoteButtonClicked() {\n    /**\n     * Set focus to the Editor\n     */\n    window.setTimeout(function () {\n      let editor = document.querySelector('.ce-redactor');\n\n      editor.click();\n    }, 10);\n    Note.clear();\n  }\n\n  /**\n   *\n   * Add note to left menu\n   *\n   * @param {object} noteData\n   * @param {string} noteData.title\n   */\n  static addMenuItem(noteData) {\n    /**\n     * Maximum chars at the node title\n     * @type {Number}\n     */\n    const titleMaxLength = 68;\n\n    let notesMenu = document.querySelector('[name=\"js-notes-menu\"]');\n    let existingNote = notesMenu.querySelector('[data-id=\"' + noteData.id + '\"]');\n\n    let noteTitle = noteData.title;\n\n    if ( noteTitle.length > titleMaxLength ) {\n      noteTitle = noteTitle.substring(0, titleMaxLength) + '…';\n    }\n\n    if (existingNote) {\n      existingNote.textContent = noteTitle;\n      return;\n    }\n\n    let menuItem = dom.make('li', null, {\n      textContent: noteTitle\n    });\n\n    menuItem.dataset.id = noteData.id;\n\n    notesMenu.insertAdjacentElement('afterbegin', menuItem);\n\n    menuItem.addEventListener('click', Aside.menuItemClicked);\n  }\n\n  /**\n   * Remove item from menu\n   *\n   * @param itemId\n   */\n  static removeMenuItem(itemId) {\n    let notesMenu = document.querySelector('[name=\"js-notes-menu\"]');\n\n    let existingNote = notesMenu.querySelector('[data-id=\"' + itemId + '\"]');\n\n    if (existingNote) existingNote.remove();\n  }\n\n  /**\n   * Note in aside menu click listener\n   * @this {Element}\n   */\n  static menuItemClicked() {\n    let menuItem = this,\n        id = menuItem.dataset.id;\n\n    let noteData = window.ipcRenderer.sendSync('get note', {id});\n\n    Note.render(noteData);\n\n    /**\n     * Scroll to top\n     */\n    let editorView = document.querySelector('[name=\"editor-view\"]');\n\n    editorView.scrollIntoView();\n  }\n}\n\nlet dom = require('./dom').default;\nlet Note = require('./note').default;\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/aside.js","const DELETE_BUTTON_ID = 'delete-button';\n\n/**\n * Note\n */\nexport default class Note {\n\n  /**\n   * Send note data to backend\n   * @static\n   */\n  static save() {\n    dom.get(DELETE_BUTTON_ID).classList.remove('hide');\n\n    codex.editor.saver.save()\n      .then(function (noteData) {\n        let note = {\n          data: noteData,\n          title: window.NOTE_TITLE.value\n        };\n\n        let saveIndicator = document.getElementById('save-indicator');\n\n        saveIndicator.classList.add('saved');\n        window.setTimeout(() => {\n          saveIndicator.classList.remove('saved');\n        }, 500);\n        window.ipcRenderer.send('save note', {note});\n      });\n  }\n\n  /**\n   *  Keyup event on editor zone fires timeout to autosave note\n   */\n  autosave() {\n    if (this.autosaveTimer) window.clearTimeout(this.autosaveTimer);\n\n    this.autosaveTimer = window.setTimeout(Note.save, 500);\n  }\n\n  /**\n   * Add keyup listener to editor zone\n   */\n  enableAutosave() {\n    codex.editor.nodes.redactor.addEventListener('keyup', this.autosave.bind(this));\n  }\n\n  /**\n   * Remove keyup listener to editor zone\n   */\n  disableAutosave() {\n    codex.editor.nodes.redactor.removeEventListener('keyup', this.autosave.bind(this));\n  }\n\n  /**\n   *  Add note to menu by Aside.addMenuItem method\n   *\n   * @param event\n   * @param data\n   */\n  static addToMenu(event, {note}) {\n    codex.editor.state.blocks.id = note.id;\n\n    Aside.addMenuItem(note);\n  }\n\n  /**\n   * Renders note\n   * @param  {object} noteData\n   */\n  static render(note) {\n    codex.editor.content.clear(true);\n    window.NOTE_TITLE.value = note.title;\n\n    let saveDate = new Date(note.data.time);\n\n    window.NOTE_DATE.textContent = saveDate.toLocaleDateString('en-US', {\n      day: 'numeric',\n      month: 'short',\n      hour: 'numeric',\n      minute: 'numeric',\n      hour12: false\n    });\n    codex.editor.content.load(note.data);\n    dom.get(DELETE_BUTTON_ID).classList.remove('hide');\n  }\n\n  /**\n   * Clears editor\n   */\n  static clear() {\n    codex.editor.content.clear(true);\n    window.NOTE_TITLE.value = '';\n    window.NOTE_DATE.textContent = '';\n    codex.editor.ui.addInitialBlock();\n    dom.get(DELETE_BUTTON_ID).classList.add('hide');\n  }\n\n  /**\n   * Delete article\n   */\n  static delete() {\n    let id = codex.editor.state.blocks.id;\n\n    if (!id) {\n      return;\n    }\n\n    if (!window.ipcRenderer.sendSync('delete note', {id})) {\n      return false;\n    }\n\n    Note.clear();\n    Aside.removeMenuItem(id);\n  }\n\n}\n\nlet Aside = require('./aside').default;\nlet dom = require('./dom').default;\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/note.js","/**\n * DOM manipulations methods\n */\nexport default class DOM {\n  /**\n   * Helper for making Elements with classname and attributes\n   * @param  {string} tagName           - new Element tag name\n   * @param  {array|string} classNames  - list or name of CSS classname(s)\n   * @param  {Object} attributes        - any attributes\n   * @return {Element}\n   */\n  static make(tagName, classNames, attributes) {\n    var el = document.createElement(tagName);\n\n    if ( Array.isArray(classNames) ) {\n      el.classList.add(...classNames);\n    } else if( classNames ) {\n      el.classList.add(classNames);\n    }\n\n    for (let attrName in attributes) {\n      el[attrName] = attributes[attrName];\n    }\n\n    return el;\n  }\n\n  /**\n  * Replaces node with\n  * @param {Element} nodeToReplace\n  * @param {Element} replaceWith\n  */\n  static replace(nodeToReplace, replaceWith) {\n    return nodeToReplace.parentNode.replaceChild(replaceWith, nodeToReplace);\n  }\n\n  /**\n  * getElementById alias\n  * @param {String} elementId\n  */\n  static get(elementId) {\n    return document.getElementById(elementId);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/dom.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./public/stylesheets/base.css\n// module id = 3\n// module chunks = 0","module.exports = require(\"electron\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"electron\"\n// module id = 4\n// module chunks = 0","'use strict';\n\nconst electron = require('electron');\n\nwindow.ipcRenderer = electron.ipcRenderer;\n\n/**\n * Disable zoom\n */\nelectron.webFrame.setZoomLevelLimits(1, 1);\n\n/**\n * Load CSS\n */\nrequire('../stylesheets/base.css');\n\n/**\n * Document ready callback\n */\nlet documentReady = () => {\n  /**\n   * Init aside module\n   */\n  let Note = require('./note').default;\n  let Aside = require('./aside').default;\n\n  new Aside();\n\n  window.ipcRenderer.on('note saved', Note.addToMenu);\n  window.NOTE_TITLE = document.getElementById('note-title');\n  window.NOTE_DATE = document.getElementById('note-date');\n\n  let note = new Note();\n\n  note.enableAutosave();\n};\n\nlet openExternalLink = function (event) {\n  if (event.target.tagName !== 'A' || !event.target.href) {\n    return;\n  }\n\n  if (!event.target.closest('.editor')) {\n    electron.shell.openExternal(event.target.href);\n    return;\n  }\n\n  if (event.metaKey || event.ctrlKey) {\n    electron.shell.openExternal(event.target.href);\n  }\n};\n\n/**\n * Application\n */\nmodule.exports = function () {\n  document.addEventListener('DOMContentLoaded', documentReady, false);\n  document.addEventListener('click', openExternalLink);\n  let Note = require('./note').default;\n  let Aside = require('./aside').default;\n\n  return {\n    Note: Note,\n    Aside: Aside\n  };\n}();\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/app.js"],"sourceRoot":""}
>>>>>>> master
