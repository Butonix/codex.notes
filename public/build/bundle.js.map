{"version":3,"sources":["webpack:///webpack/bootstrap 9710f8a68818e7824c33","webpack:///./public/javascripts/dom.js","webpack:///./public/javascripts/dialog.js","webpack:///./public/javascripts/note.js","webpack:///external \"electron\"","webpack:///./public/javascripts/aside.js","webpack:///./public/javascripts/connection-observer.js","webpack:///./public/javascripts/editor.js","webpack:///./public/javascripts/status-bar.js","webpack:///./public/javascripts/user.js","webpack:///./public/stylesheets/base.css","webpack:///./public/javascripts/app.js","webpack:///./public/javascripts/aside-swiper.js","webpack:///./public/javascripts/autoresizer.js","webpack:///./public/javascripts/folder-settings.js","webpack:///./public/javascripts/folder.js","webpack:///./public/javascripts/shortcut.js","webpack:///./public/javascripts/swipe-detector.js","webpack:///./public/javascripts/utils/validate.js"],"names":["DOM","tagName","classNames","attributes","el","document","createElement","Array","isArray","classList","add","attrName","parent","elements","forEach","appendChild","nodeToReplace","replaceWith","parentNode","replaceChild","elementId","getElementById","type","path","instanceName","resourcePrefix","Promise","resolve","reject","includes","node","toLowerCase","async","defer","charset","rel","id","timerLabel","console","time","onload","timeEnd","onerror","src","href","head","newNode","referenceNode","insertAdjacentElement","remote","require","Dialog","text","browserWindow","getCurrentWindow","setSheetOffset","width","choice","dialog","showMessageBox","buttons","title","message","$","default","AutoResizer","Shortcut","Note","deleteButton","get","titleEl","dateEl","showSavedIndicatorTimer","autoresizedTitle","shortcuts","remove","folderId","codex","notes","aside","currentFolder","editor","saver","save","then","validate","noteData","note","data","value","trim","saveIndicator","window","clearTimeout","setTimeout","ipcRenderer","send","catch","log","err","items","length","Error","isRootFolder","state","blocks","_id","addMenuItem","content","clear","dtModify","Date","textContent","toLocaleDateString","day","month","hour","minute","hour12","load","JSON","parse","version","editorVersion","destroy","shortcut","name","on","nodes","redactor","callback","event","preventDefault","stopImmediatePropagation","range","createRange","selection","getSelection","selectNodeContents","removeAllRanges","addRange","push","ui","addInitialBlock","confirm","sendSync","removeMenuItem","titleElement","keyCode","focusEditor","querySelector","click","AsideSwiper","menuItemTitleMaxLength","Aside","CSS","notesMenuLoading","notesMenu","foldersMenu","swiper","opened","folderOpened","closed","folderClosed","previouslyOpenedFolder","loadNotes","loadFolders","userFolders","innerHTML","addFolder","folder","newNoteButtons","querySelectorAll","button","addEventListener","newNoteButtonClicked","newFolderButton","newFolderField","newFolderInput","newFolderButtonClicked","newFolderInputFilled","folderCloseToggler","closeFolder","activateScrollableGradient","folderSettings","response","error","target","input","focus","key","folderTitle","createdFolder","warn","existingNote","createMenuItemTitle","item","makeMenuItem","menuItemClicked","folderClicked","dataset","make","substring","itemId","menu","folderItem","menuItem","render","editorView","scrollIntoView","assert","close","open","minimumDistance","scrolledModificator","scrollableZones","addClassOnScroll","scrollableContent","scrollableWrapper","scrollTop","zone","ConnectionObserver","navigator","onLine","online","offline","statusBar","loading","sync","once","returnedData","reconnect","Editor","plugins","autosaveTimer","loadEditor","loadPlugins","init","all","loadResource","pluginsQuery","config","holderId","initialBlockPlugin","hideToolbar","placeholder","tools","iconClassname","makeSettings","paragraph","allowedToPaste","showInlineToolbar","allowRenderOnPaste","header","displayInToolbox","start","enableAutosave","noteTitle","autosave","bind","removeEventListener","StatusBar","statusText","blinked","toggle","User","authButton","userData","fillUserPanel","showAuth","authResponse","token","user","userPanel","photo","style","backgroundImage","electron","webFrame","setZoomLevelLimits","documentReady","connectionObserver","addToMenu","openExternalLink","closest","shell","openExternal","metaKey","ctrlKey","module","exports","SwipeDetector","wrapper","toggled","left","right","directionRight","Autoresizer","i","addResizer","height","scrollHeight","enterKeyPressed","resize","removeResizer","Validate","FolderSettings","toggler","closeButton","removeFolderButton","folderTitleInput","getElementsByName","newMemberInput","membersList","removeFolderClicked","changeTitleKeydown","inviteMemberKeydown","body","panelOpenedModifier","result","delete","email","newMemberItem","append","Folder","_title","folderTitleElement","folderData","clearNotesList","notesListWrapper","removeFolderFromMenu","newTitle","fillHeader","updateFolderTitleInMenu","keyCodes","supportedCommands","ShortCut","commands","keys","parseShortcutName","element","executeShortcut","execute","split","toUpperCase","command","cmdKey","shiftKey","altKey","passed","allCommandsPassed","allKeysPassed","call","swiped","wheelTimeout","detectSwipe","isHorisontal","wheelDeltaY","swipeEnoughLong","wheelDeltaX","deltaX","re","test"],"mappings":"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","file":"./public/build/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9710f8a68818e7824c33"," /**\n * DOM manipulations methods\n */\nexport default class DOM {\n  /**\n   * Helper for making Elements with classname and attributes\n   * @param  {string} tagName           - new Element tag name\n   * @param  {array|string} classNames  - list or name of CSS classname(s)\n   * @param  {Object} attributes        - any attributes\n   * @return {Element}\n   */\n  static make(tagName, classNames, attributes) {\n    var el = document.createElement(tagName);\n\n    if ( Array.isArray(classNames) ) {\n      el.classList.add(...classNames);\n    } else if( classNames ) {\n      el.classList.add(classNames);\n    }\n\n    for (let attrName in attributes) {\n      el[attrName] = attributes[attrName];\n    }\n\n    return el;\n  }\n\n  /**\n   * Append one or several elements to the parent\n   *\n   * @param  {Element} parent    - where to append\n   * @param  {Element|Element[]} - element ore elements list\n   */\n  static append(parent, elements) {\n    if ( Array.isArray(elements) ) {\n      elements.forEach( el => parent.appendChild(el) );\n    } else {\n      parent.appendChild(elements);\n    }\n  }\n\n  /**\n\n  /**\n  * Replaces node with\n  * @param {Element} nodeToReplace\n  * @param {Element} replaceWith\n  */\n  static replace(nodeToReplace, replaceWith) {\n    return nodeToReplace.parentNode.replaceChild(replaceWith, nodeToReplace);\n  }\n\n  /**\n  * getElementById alias\n  * @param {String} elementId\n  */\n  static get(elementId) {\n    return document.getElementById(elementId);\n  }\n\n  /**\n  * Loads static resourse: CSS or JS\n  * @param {string} type  - CSS|JS\n  * @param {string} path  - resource path\n  * @param {string} inctanceName - unique name of resource\n  * @return Promise\n  */\n  static loadResource(type, path, instanceName) {\n    /**\n     * Imported resource ID prefix\n     * @type {String}\n     */\n    const resourcePrefix = 'cdx-resourse';\n\n    return new Promise(function (resolve, reject) {\n      if (!type || !['JS', 'CSS'].includes(type)) {\n        reject(`Unexpected resource type passed. «CSS» or «JS» expected, «${type}» passed`);\n      }\n\n      let node;\n\n      /** Script is already loaded */\n      if ( !instanceName ) {\n        reject('Instance name is missed');\n      } else if ( document.getElementById(`${resourcePrefix}-${type.toLowerCase()}-${instanceName}`) ) {\n        resolve(path);\n      }\n\n      if (type === 'JS') {\n        node = document.createElement('script');\n        node.async = true;\n        node.defer = true;\n        node.charset = 'utf-8';\n      } else {\n        node = document.createElement('link');\n        node.rel = 'stylesheet';\n      }\n\n      node.id = `${resourcePrefix}-${type.toLowerCase()}-${instanceName}`;\n\n      let timerLabel = `Resource loading ${type} ${instanceName}`;\n\n      console.time(timerLabel);\n\n      node.onload = function () {\n        console.timeEnd(timerLabel);\n        resolve(path);\n      };\n\n      node.onerror = function () {\n        console.timeEnd(timerLabel);\n        reject(path);\n      };\n\n      if (type === 'JS') {\n        node.src = path;\n      } else {\n        node.href = path;\n      }\n\n      document.head.appendChild(node);\n    });\n  }\n\n  /**\n   * Inserts one element after another\n   * @param  {Element} newNode\n   * @param  {Element} referenceNode\n   */\n  static after(newNode, referenceNode) {\n    referenceNode.insertAdjacentElement('afterEnd', newNode);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/dom.js","const remote = require('electron').remote;\n\n/**\n *\n */\nexport default class Dialog {\n\n  /**\n   *\n   */\n  constructor() {};\n\n  /**\n   *\n   * @returns {boolean}\n   */\n  static confirm(text) {\n    const browserWindow = remote.getCurrentWindow();\n\n    browserWindow.setSheetOffset(30, browserWindow.width / 2);\n\n    let choice = remote.dialog.showMessageBox(browserWindow,\n      {\n        type: 'question',\n        buttons: ['Yes', 'No'],\n        title: 'Confirm',\n        message: text\n      });\n\n    if (choice === 0) {\n      return true;\n    }    else {\n      return false;\n    }\n  }\n\n  /**\n   * Shows error notification\n   *\n   * @returns {boolean}\n   */\n  static error(text) {\n    const browserWindow = remote.getCurrentWindow();\n\n    browserWindow.setSheetOffset(30, browserWindow.width / 2);\n\n    remote.dialog.showMessageBox(browserWindow, {\n      type: 'error',\n      title: 'Wow. Something goes wrong.',\n      message: text\n    });\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/dialog.js","const $ = require('./dom').default;\nconst AutoResizer = require('./autoresizer').default;\nconst Dialog = require('./dialog').default;\nconst Shortcut = require('./shortcut').default;\n\n/**\n * @typedef {Object} NoteData\n * @property {String} _id           — Note's id\n * @property {String} title         — Note's title\n * @property {String} authorId      — Note's Author id\n * @property {String} folderId      - Note's Folder id\n * @property {String} content       - JSON with Note's body\n * @property {Number} dtModify      - timestamp of last modification\n * @property {Number} dtCreate      - timestamp of Note creation\n * @property {Boolean} isRemoved    - Note's removed state\n * @property {String|null} editorVersion - used CodeX Editor version\n */\n\n/**\n * Note section module\n *\n * @typedef {Note} Note\n * @property {Element} deleteButton\n * @property {Element} titleEl\n * @property {Element} dateEl\n * @property {Timer} showSavedIndicatorTimer\n * @property {ShortCut[]} shortcut\n */\nexport default class Note {\n\n  /**\n   * @constructor\n   */\n  constructor() {\n    this.deleteButton = $.get('delete-button');\n\n    this.titleEl = document.getElementById('note-title');\n    this.dateEl  = document.getElementById('note-date');\n\n    this.showSavedIndicatorTimer = null;\n\n    // when we are creating new note\n    if (!this.autoresizedTitle) {\n      this.autoresizedTitle = new AutoResizer([ this.titleEl ]);\n    }\n\n    this.shortcuts = [];\n  }\n\n  /**\n   * Send note data to backend\n   * @static\n   */\n  save() {\n    this.deleteButton.classList.remove('hide');\n\n    /**\n     * If folder is opened, pass id. Otherwise pass false\n     */\n    let folderId = codex.notes.aside.currentFolder ? codex.notes.aside.currentFolder.id : null;\n\n    codex.editor.saver.save()\n      .then(noteData => {\n        this.validate(noteData);\n        return noteData;\n      })\n      .then( noteData => {\n        let note = {\n          data: noteData,\n          title: this.titleEl.value.trim(),\n          folderId\n        };\n\n        let saveIndicator = document.getElementById('save-indicator');\n\n        if (this.showSavedIndicatorTimer) {\n          window.clearTimeout(this.showSavedIndicatorTimer);\n        }\n\n        saveIndicator.classList.add('saved');\n\n        this.showSavedIndicatorTimer = window.setTimeout( () => {\n          saveIndicator.classList.remove('saved');\n        }, 500);\n\n        window.ipcRenderer.send('note - save', {note});\n      })\n      .catch( err => {\n        console.log('Error while saving note: ', err);\n      } );\n  }\n\n  /**\n   * Validate Note data before saving\n   * @param {object} noteData\n   * @throws {Error}\n   */\n  validate(noteData) {\n    if (!noteData.items.length) {\n      throw Error('Article is empty');\n    }\n  }\n\n  /**\n   * Add Note to the menu by Aside.addMenuItem method\n   *\n   * @param {object} data\n   * @param {object} data.note\n   * @param {number} data.note.folderId\n   * @param {number} data.note._id\n   * @param {string} data.note.title\n   * @param {Boolean} data.isRootFolder - true if Note included in the Root Folder\n   */\n  addToMenu({note, isRootFolder}) {\n    codex.editor.state.blocks.id = note._id;\n    codex.notes.aside.addMenuItem(note, isRootFolder);\n  }\n\n  /**\n   * Render the Note\n   * @param {NoteData} note\n   */\n  render(note) {\n    codex.editor.content.clear(true);\n    this.titleEl.value = note.title;\n\n    /**\n     * We store all times in a Seconds to correspond server-format\n     * @type {Date}\n     */\n    let dtModify = new Date(note.dtModify * 1000);\n\n    this.dateEl.textContent = dtModify.toLocaleDateString('en-US', {\n      day: 'numeric',\n      month: 'short',\n      hour: 'numeric',\n      minute: 'numeric',\n      hour12: false\n    });\n    codex.editor.content.load({\n      id: note._id,\n      items: JSON.parse(note.content),\n      time: note.dtModify,\n      version: note.editorVersion,\n    });\n    this.deleteButton.classList.remove('hide');\n\n    /**\n     * if we are trying to render new note but we have an Autoresizer instance\n     * then we need to clear it before we create new one\n     */\n    if (this.autoresizedTitle) {\n      this.autoresizedTitle.destroy();\n    }\n\n    this.autoresizedTitle = new AutoResizer([ this.titleEl ]);\n\n    /**\n     * create new CMD+A shortcut\n     * bind it on current rendered Note\n     */\n    let shortcut = new Shortcut({\n      name: 'CMD+A',\n      on: codex.editor.nodes.redactor,\n      callback: function (event) {\n        event.preventDefault();\n        event.stopImmediatePropagation();\n\n        let range = document.createRange(),\n            selection = window.getSelection();\n\n        range.selectNodeContents(codex.editor.nodes.redactor);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    });\n\n    this.shortcuts.push(shortcut);\n  }\n\n  /**\n   * Clears editor\n   */\n  clear() {\n    codex.editor.content.clear(true);\n    this.titleEl.value = '';\n    this.dateEl.textContent = '';\n    codex.editor.ui.addInitialBlock();\n    this.deleteButton.classList.add('hide');\n\n    // destroy autoresizer\n    this.autoresizedTitle.destroy();\n\n    // destroy all shortcuts on note\n    this.shortcuts.forEach((shortcut) => {\n      shortcut.remove();\n    });\n  }\n\n  /**\n   * Set focus to the Editor\n   */\n  static focusEditor() {\n    window.setTimeout(function () {\n      let editor = document.querySelector('.ce-redactor');\n\n      editor.click();\n    }, 10);\n  }\n\n  /**\n   * Delete article\n   */\n  delete() {\n    let id = codex.editor.state.blocks.id;\n\n    if (!id) {\n      return;\n    }\n\n    if (Dialog.confirm('Are you sure you want to delete this note?')) {\n      if (!window.ipcRenderer.sendSync('note - delete', {id})) {\n        return false;\n      }\n\n      codex.notes.aside.removeMenuItem(id);\n      this.clear();\n    }\n  }\n\n  /**\n   * Title input keydowns\n   * @description  By ENTER, sets focus on editor\n   * @param  {Element} titleElement - title block\n   * @param  {Event} event - keydown event\n   */\n  titleKeydownHandler(titleElement, event) {\n    if (event.keyCode == 13) {\n      event.preventDefault();\n\n      Note.focusEditor();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/note.js","module.exports = require(\"electron\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"electron\"\n// module id = 3\n// module chunks = 0","import Folder from './folder';\nimport Note from './note';\nimport FolderSettings from './folder-settings';\n\nconst AsideSwiper = require('./aside-swiper').default;\nconst $ = require('./dom').default;\n\n/**\n * Maximum chars at the menu title\n * @type {Number}\n */\nconst menuItemTitleMaxLength = 68;\n\n/**\n * Aside column module\n *\n * @property {object}          this.CSS                     classnames dictionary\n * @property {AsideSwiper}     this.swiper                  AsideSwiper instance\n * @property {Folder}          this.currentFolder           Opened folder instance\n * @property {Folder}          this.previouslyOpenedFolder  See docs in {@link Aside#constructor}\n * @property {Element}         this.newFolderButton         New folder button\n * @property {Element}         this.newFolderField          New folder form field\n * @property {FolderSettings}  this.folderSettings          Folder Settings Panel instance\n */\nexport default class Aside {\n\n  /**\n   * @constructor\n   */\n  constructor() {\n    /**\n     * Make CSS dictionary\n     * @type {Object}\n     */\n    this.CSS = {\n      notesMenuLoading: 'notes-list--loading'\n    };\n\n    /**\n     * Find notes list holder\n     * @type {Element}\n     */\n    let notesMenu = document.querySelector('[name=\"js-notes-menu\"]'),\n        foldersMenu = document.querySelector('[name=\"js-folders-menu\"]');\n\n    /**\n     * Module for hide/show folder sections\n     * @type {AsideSwiper}\n     */\n    this.swiper = new AsideSwiper({\n      opened: () => this.folderOpened(),\n      closed: () => this.folderClosed()\n    });\n\n    /**\n     * Current opened folder.\n     * @type {Folder}\n     */\n    this.currentFolder = null;\n\n    /**\n     * Save previously opened folder id.\n     * Usecase:\n     *   - Folder opened by click in menu (and saved in {@link Aside#currentFolder})\n     *   - Folder closed by swipe-left on Aside (this.currentFolder = null)\n     *   - User makes swipe-right to open Folder back, but we have not its ID\n     *   - So we use previouslyOpenedFolder to construct this.currentFolder again\n     */\n    this.previouslyOpenedFolder = null;\n\n    /**\n     * Show preloader\n     */\n    notesMenu.classList.add(this.CSS.notesMenuLoading);\n    foldersMenu.classList.add(this.CSS.notesMenuLoading);\n\n    /**\n     * Emit message to load list\n     */\n    this.loadNotes();\n    this.loadFolders();\n\n    /**\n     * Update folder list\n     */\n    window.ipcRenderer.on('update folders list', (event, {userFolders}) => {\n      foldersMenu.classList.remove(this.CSS.notesMenuLoading);\n      foldersMenu.innerHTML = '';\n      userFolders.forEach( folder => this.addFolder(folder) );\n    });\n\n    /**\n     * Update notes list\n     */\n    window.ipcRenderer.on('notes list - update', (event, {notes, isRootFolder}) => {\n      notesMenu.classList.remove(this.CSS.notesMenuLoading);\n      notes.forEach( note => this.addMenuItem(note, isRootFolder) );\n    });\n\n    /**\n     * Activate new note button\n     */\n    let newNoteButtons = document.querySelectorAll('[name=\"js-new-note-button\"]');\n\n    newNoteButtons.forEach( button => {\n      button.addEventListener('click', () => this.newNoteButtonClicked(button) );\n    });\n\n    /**\n     * Activate new folder button\n     */\n    this.newFolderButton = document.querySelector('[name=\"js-new-folder-button\"]');\n    this.newFolderField = document.querySelector('[name=\"js-new-folder-field\"]');\n\n    let newFolderInput  = this.newFolderField.querySelector('input');\n\n    this.newFolderButton.addEventListener('click',  event => this.newFolderButtonClicked(event) );\n    newFolderInput.addEventListener('keydown', event => this.newFolderInputFilled(event) );\n\n    /**\n     * Activate folders Back button\n     */\n    let folderCloseToggler = $.get('folder-close-zone');\n\n    folderCloseToggler.addEventListener('click', () => {\n      this.closeFolder();\n    });\n\n    this.activateScrollableGradient();\n\n    /**\n     * Active 'Folder Settings' panel\n     */\n    this.folderSettings = new FolderSettings();\n  }\n\n  /**\n   * Loads notes list from the server\n   *\n   * Can be used async with subscribtion\n   * on window.ipcRenderer.on('notes list - update', (event, {notes, folder}) => {})\n   *\n   * or synchronously like loadNotes().then( notes => {})\n   *\n   * @param  {string|null} folderId\n   * @returns {<Promise>.[]}\n   */\n  loadNotes( folderId = null) {\n    return new Promise(resolve => {\n      let response = window.ipcRenderer.sendSync('notes list - load', folderId);\n      /**\n       * @var {object} response\n       * @var {array}  response.notes\n       * @var {object} response.folder\n       * @var {number} response.folder.id\n       * @var {string} response.folder.title\n       * @var {Boolean} response.isRootFolder\n       */\n\n      resolve(response);\n    }).catch(error => {\n      console.log('Error while loading notes: ', error);\n    });\n  }\n\n  /**\n   * Loads folders list\n   */\n  loadFolders() {\n    window.ipcRenderer.send('folders list - load');\n  }\n\n\n  /**\n   * New note button click handler\n   * @this {Aside}\n   */\n  newNoteButtonClicked() {\n    Note.focusEditor();\n\n    codex.notes.note.clear();\n  }\n\n  /**\n   * New folder button click handler\n   * @param {MouseEvent} event\n   */\n  newFolderButtonClicked(event) {\n    let button = event.target,\n        input = this.newFolderField.querySelector('input');\n\n    button.classList.add('hide');\n    this.newFolderField.classList.remove('hide');\n\n    input.focus();\n  }\n\n   /**\n   * New Folder input keydown handler\n   * @param {KeyboardEvent} event\n   */\n  newFolderInputFilled(event) {\n    if (event.key !== 'Enter') {\n      return;\n    }\n\n    let input = event.target,\n        folderTitle = input.value.trim();\n\n    if (!folderTitle) {\n      return;\n    }\n\n    /**\n     * Save Folder\n     * @type {object}\n     */\n    let createdFolder = window.ipcRenderer.sendSync('folder - create', folderTitle);\n\n    /**\n     * Add saved folder to the menu\n     */\n    this.addFolder(createdFolder);\n\n    input.value = '';\n\n    this.newFolderField.classList.add('hide');\n    this.newFolderButton.classList.remove('hide');\n  }\n\n  /**\n   *\n   * Add a Note to the left menu\n   *\n   * @param {object} noteData\n   * @param {number} noteData._id\n   * @param {string} noteData.title\n   * @param {number} noteData.folderId\n   *\n   * @param {Boolean} isRootFolder - true if Note is included to the Root Folder\n   */\n  addMenuItem(noteData, isRootFolder) {\n    if (!noteData.title) {\n      console.warn('Can not add Note to the Aside because it has no title', noteData);\n      return;\n    }\n\n    let notesMenu;\n\n    if (isRootFolder) {\n      notesMenu = document.querySelector('[name=\"js-notes-menu\"]');\n    } else if (this.currentFolder && noteData.folderId === this.currentFolder._id) {\n      notesMenu = document.querySelector('[name=\"js-folder-notes-menu\"]');\n    } else {\n      console.log('Note added to closed folder: %o', noteData.folderId);\n      return;\n    }\n\n    /**\n     * If we already have this item, update title\n     */\n    let existingNote = notesMenu.querySelector('[data-id=\"' + noteData._id + '\"]');\n\n    if (existingNote) {\n      existingNote.textContent = this.createMenuItemTitle(noteData.title);\n      return;\n    }\n\n    let item = this.makeMenuItem(noteData.title, {id: noteData._id});\n\n    notesMenu.insertAdjacentElement('afterbegin', item);\n\n    item.addEventListener('click', event => this.menuItemClicked(event) );\n  }\n\n  /**\n   * Add new item to the folders list\n   *\n   * @param {object} folder\n   * @param {string} folder.title\n   * @param {number} folder._id\n   */\n  addFolder(folder) {\n    if (!folder.title) {\n      console.warn('Can not add Folder to the Aside because it has no title', folder);\n      return;\n    }\n    let foldersMenu = document.querySelector('[name=\"js-folders-menu\"]');\n    let item = this.makeMenuItem(folder.title, {folderId: folder._id});\n\n    foldersMenu.insertAdjacentElement('afterbegin', item);\n\n    item.addEventListener('click', event => this.folderClicked(event.target) );\n  }\n\n  /**\n   * Makes aside menu item\n   * @param  {String} title   - item title\n   * @param  {object} dataset - data to store in dataset\n   * @return {Element}\n   */\n  makeMenuItem(title, dataset) {\n    title = this.createMenuItemTitle(title);\n\n    let item = $.make('li', null, {\n      textContent: title\n    });\n\n    for (let key in dataset) {\n      item.dataset[key] = dataset[key];\n    }\n\n    return item;\n  }\n\n  /**\n   * Creates aside menu item title\n   * @param {String} title\n   * @return {String}\n   */\n  createMenuItemTitle(title) {\n    if ( title.length > menuItemTitleMaxLength ) {\n      title = title.substring(0, menuItemTitleMaxLength) + '…';\n    }\n\n    return title;\n  }\n\n  /**\n   * Remove item from menu\n   *\n   * @param itemId\n   */\n  removeMenuItem(itemId) {\n    let notesMenu = document.querySelectorAll('[name=\"js-notes-menu\"], [name=\"js-folder-notes-menu\"]');\n\n    notesMenu.forEach( menu => {\n      let existingNote = menu.querySelector('[data-id=\"' + itemId + '\"]');\n\n      if (existingNote) existingNote.remove();\n    });\n  }\n\n  /**\n   * Remove folder from menu by ID\n   * @param folderId - folder ID\n   */\n  removeFolderFromMenu(folderId) {\n    let foldersMenu = document.querySelector('[name=\"js-folders-menu\"]');\n\n    if (!foldersMenu) {\n      return false;\n    }\n\n    let folderItem = foldersMenu.querySelector('[data-folder-id=\"' + folderId + '\"]');\n\n    if (folderItem) {\n      folderItem.remove();\n    }\n  }\n\n  /**\n   * Updates Folder's title in menu\n   *\n   * @param {MongoId} folderId - folder ID\n   * @param {String} title     - new title\n   */\n  updateFolderTitleInMenu(folderId, title) {\n    let foldersMenu = document.querySelector('[name=\"js-folders-menu\"]');\n\n    if (!foldersMenu) {\n      return false;\n    }\n\n    let folderItem = foldersMenu.querySelector('[data-folder-id=\"' + folderId + '\"]');\n\n    if (folderItem) {\n      folderItem.textContent = title;\n    }\n  }\n\n\n  /**\n   * Note in aside menu click listener\n   * @param {MouseEvent} event\n   */\n  menuItemClicked(event) {\n    let menuItem = event.target,\n        id = menuItem.dataset.id;\n\n    let noteData = window.ipcRenderer.sendSync('note - get', {id});\n\n    codex.notes.note.render(noteData);\n\n    /**\n     * Scroll to top\n     */\n    let editorView = document.querySelector('[name=\"editor-view\"]');\n\n    editorView.scrollIntoView();\n  }\n\n  /**\n   * Fired after swipe-right\n   */\n  folderOpened() {\n    /**\n     * Restore current folder after closing\n     */\n    if (!this.currentFolder && this.previouslyOpenedFolder) {\n      this.currentFolder = new Folder(this.previouslyOpenedFolder);\n    }\n\n    console.assert(this.currentFolder, 'Folder opened but does not initialized');\n\n    codex.notes.note.clear();\n  }\n\n  /**\n   * Fired after swipe-left\n   */\n  folderClosed() {\n    if (this.currentFolder) {\n      this.previouslyOpenedFolder = this.currentFolder.id;\n    }\n\n    this.currentFolder = null;\n    this.folderSettings.close();\n  }\n\n  /**\n   * Folder menu item clicked handler\n   * @param {Element} item - clicked folder button\n   */\n  folderClicked( item ) {\n    let folderId = item.dataset.folderId;\n\n    /**\n     * Load folder\n     */\n    this.currentFolder = new Folder(folderId, item.textContent);\n\n    /**\n     * Open folder section\n     */\n    this.swiper.open();\n  }\n\n  /**\n   * Closes opened folder\n   */\n  closeFolder() {\n    this.swiper.close();\n  }\n\n  /**\n   * Shows fade-out gradient at the top of scrollable zone\n   * Uses by scroll to prevent overlaying first block (NOTES, FOLDERS headings) with gradient when block is not scrolled\n   */\n  activateScrollableGradient() {\n    /**\n     * Scroll top offset to show gradient\n     * @type {Number}\n     */\n    const minimumDistance = 5;\n\n    /**\n     * Modificatior that will be added to the wrapper on scroll\n     * @type {String}\n     */\n    const scrolledModificator = 'aside__scrollable--scrolled';\n\n    /**\n     * Scrollable zoners\n     * @type {Element[]}\n     */\n    let scrollableZones = document.querySelectorAll('[name=\"js-scrollable\"]');\n\n    let addClassOnScroll = event => {\n      let scrollableContent = event.target,\n          scrollableWrapper = event.target.parentNode;\n\n      if (scrollableContent.scrollTop > minimumDistance) {\n        scrollableWrapper.classList.add(scrolledModificator);\n      } else {\n        scrollableWrapper.classList.remove(scrolledModificator);\n      }\n    };\n\n    scrollableZones.forEach( zone => {\n      zone.addEventListener('scroll', addClassOnScroll);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/aside.js","/**\n * @module ConnectionObserver\n *\n * Detects Online and Offline statuses and update state in the Aside\n *\n * @typedef {ConnectionObserver} ConnectionObserver\n */\nexport default class ConnectionObserver {\n  /**\n   * @constructor\n   */\n  constructor() {\n    if (window.navigator.onLine) {\n      this.online();\n    } else {\n      this.offline();\n    }\n\n    window.addEventListener('online',  () => {\n      this.online();\n    });\n    window.addEventListener('offline', () => {\n      this.offline();\n    });\n  }\n\n  /**\n   * Fired when the Application goes Online\n   */\n  online() {\n    codex.notes.statusBar.text = 'Syncing';\n    codex.notes.statusBar.loading = true;\n\n    this.sync().then(() => {\n      codex.notes.statusBar.text = 'All saved';\n      codex.notes.statusBar.loading = false;\n    });\n  }\n\n  /**\n   * Send sync event\n   * @return {Promise<Object>} - updates from the Cloud\n   */\n  sync() {\n    return new Promise((resolve) => {\n      console.time('Syncing...');\n      window.ipcRenderer.send('user - sync');\n      window.ipcRenderer.once('sync finished', (event, returnedData) => {\n        console.timeEnd('Syncing...');\n        resolve(returnedData);\n      });\n    });\n  }\n\n  /**\n   * Fired when the Application goes Offline\n   */\n  offline() {\n    codex.notes.statusBar.text = 'Offline';\n\n    this.reconnect();\n  }\n\n  /**\n   * Start reconnection process\n   */\n  reconnect() {\n    codex.notes.statusBar.text = 'Reconnection';\n    codex.notes.statusBar.loading = true;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/connection-observer.js","let $ = require('./dom').default;\n\n/**\n * CodeX Editor module\n */\nexport default class Editor {\n\n  /**\n  * @constructor\n  * @property {String}  path          - CodeX Editor library path\n  * @property {Array}   plugins       - plugins names\n  * @property {TimerId} autosaveTimer - autosave debounce timer\n  */\n  constructor() {\n    this.path = '../../public/codex.editor/';\n    this.plugins = ['paragraph', 'header'];\n\n    this.autosaveTimer = null;\n\n    this.loadEditor()\n        .then(() => this.loadPlugins())\n        .then(() => this.init());\n  }\n\n  /**\n   * Loads CodeX Editor sources\n   * @return {Promise}\n   */\n  loadEditor() {\n    return Promise.all([\n      $.loadResource('JS', this.path + 'codex-editor.js', 'codex-editor'),\n      $.loadResource('CSS', this.path + 'codex-editor.css', 'codex-editor')\n    ]).catch( err => console.warn('Cannot load Codex Editor sources: ', err))\n    .then( () => console.log('CodeX Editor loaded') );\n  }\n\n  /**\n   * Loads CodeX Editor plugins\n   * @return {Promise}\n   */\n  loadPlugins() {\n    let pluginsQuery = [];\n\n    this.plugins.forEach( name => {\n      pluginsQuery.push(...[\n        $.loadResource('JS', this.path + 'plugins/' + name + '/' + name + '.js', name),\n        $.loadResource('CSS', this.path + 'plugins/' + name + '/' + name + '.css', name)\n      ]);\n    });\n\n    return Promise.all(pluginsQuery)\n      .catch( err => console.warn('Cannot load plugin: ', err))\n      .then( () => console.log('Plugins loaded') );\n  }\n\n  /**\n   * Init CodeX Editor\n   * @return {[type]} [description]\n   */\n  init() {\n    let config = {\n      holderId : 'codex-editor',\n      initialBlockPlugin : 'paragraph',\n      hideToolbar: false,\n      placeholder: 'Your story',\n      tools : {}\n    };\n\n    this.plugins.forEach( name => {\n      if (!window[name]) {\n        console.warn('Plugin ' + name + ' does not ready');\n        return;\n      }\n\n      config.tools[name] = {\n        type: name,\n        iconClassname: 'ce-icon-' + name,\n        render: window[name].render,\n        validate: window[name].validate,\n        save: window[name].save,\n        destroy: window[name].destroy,\n        makeSettings: window[name].makeSettings,\n      };\n    });\n\n    if (config.tools.paragraph) {\n      config.tools.paragraph.allowedToPaste = true;\n      config.tools.paragraph.showInlineToolbar = true;\n      config.tools.paragraph.allowRenderOnPaste = true;\n    }\n\n    if (config.tools.header) {\n      config.tools.header.displayInToolbox = true;\n    }\n\n    codex.editor.start(config);\n\n    window.setTimeout(() => {\n      this.enableAutosave();\n    }, 500);\n  }\n\n  /**\n   * Keyup event on editor zone fires timeout to autosave note\n   */\n  autosave() {\n    if (this.autosaveTimer) window.clearTimeout(this.autosaveTimer);\n\n    this.autosaveTimer = window.setTimeout( () => {\n      codex.notes.note.save();\n    }, 500);\n  }\n\n  /**\n   * Add keyup listener to editor zone\n   */\n  enableAutosave() {\n    let noteTitle = document.getElementById('note-title');\n\n    noteTitle.addEventListener('keyup', this.autosave.bind(this));\n    codex.editor.nodes.redactor.addEventListener('keyup', this.autosave.bind(this));\n  }\n\n  /**\n   * Remove keyup listener to editor zone\n   */\n  disableAutosave() {\n    codex.editor.nodes.redactor.removeEventListener('keyup', this.autosave.bind(this));\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/editor.js","import $ from './dom';\n\n/**\n * @module StatusBar\n * @description Module for working with Aside Status Bar\n *\n * @typedef {StatusBar} StatusBar\n * @property {Element} statusBar - Status Bar Element\n */\nexport default class StatusBar {\n\n  /**\n   * @constructor\n   * Find status bar Element, init all stuff\n   */\n  constructor() {\n    this.statusBar = $.get('status-bar');\n  }\n\n  /**\n   * CSS class names\n   */\n  static get CSS() {\n    return {\n      blinked: 'status-bar--blinked',\n      loading: 'status-bar--loading'\n    };\n  }\n\n  /**\n   * Update text in the Status Bar\n   * @param {string} statusText - new text\n   */\n  set text(statusText) {\n    this.statusBar.textContent = statusText;\n\n    this.statusBar.classList.add(StatusBar.CSS.blinked);\n    window.setTimeout(() => {\n      this.statusBar.classList.remove(StatusBar.CSS.blinked);\n    }, 400);\n  }\n\n  /**\n   * Status Bar text getter\n   */\n  get text() {\n    return this.statusBar.textContent;\n  }\n\n  /**\n   * Set loading state\n   * @param {boolean} state - true|false\n   */\n  set loading(state) {\n    this.statusBar.classList.toggle(StatusBar.CSS.loading, state);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/status-bar.js","/**\n * DOM helper\n */\nimport $ from './dom';\n\nimport Dialog from './dialog';\n\n/**\n * @class       User\n * @classdesc   Authentication methods and user object\n *\n * @typedef {User} User\n * @property {Element} authButton - button 'Login with Google'\n */\nexport default class User {\n\n  /**\n   * @constructor\n   */\n  constructor() {\n    this.authButton = document.getElementById('js-auth-button');\n\n    let userData = window.ipcRenderer.sendSync('user - get');\n\n    this.fillUserPanel(userData);\n\n    this.authButton.addEventListener('click', () => {\n      this.showAuth();\n    });\n  }\n\n  /**\n   * Opens auth popup\n   */\n  showAuth() {\n    let authResponse = window.ipcRenderer.sendSync('auth - google auth');\n\n    if (authResponse && authResponse.token) {\n      this.fillUserPanel(authResponse);\n      window.ipcRenderer.send('user - sync');\n    } else {\n      Dialog.error('Authentication failed. Please, try again.');\n    }\n  }\n\n  /**\n   * Fills user panel\n   * @param  {Object} user\n   * @param  {String} user.id\n   * @param  {String} user.name\n   * @param  {String} user.photo\n   */\n  fillUserPanel(user) {\n    if (!user.name) return;\n\n    let userPanel = $.get('user-panel'),\n        photo = $.get('user-photo');\n\n    userPanel.classList.add('aside__header-avatar--filled');\n    photo.style.backgroundImage = `url(${user.photo})`;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/user.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./public/stylesheets/base.css\n// module id = 9\n// module chunks = 0","'use strict';\n\n\n/**\n * Load libraries\n */\nconst electron = require('electron');\nconst Editor = require('./editor').default;\n\n/**\n * Load components\n */\nconst Aside = require('./aside').default;\nconst Note = require('./note').default;\n\nimport User from './user';\nimport StatusBar from './status-bar';\nimport ConnectionObserver from './connection-observer';\n\n/**\n * Save render proccess to the ipdRender global propery\n */\nwindow.ipcRenderer = electron.ipcRenderer;\n\n/**\n * Disable zoom\n */\nelectron.webFrame.setZoomLevelLimits(1, 1);\n\n/**\n * Load CSS\n */\nrequire('../stylesheets/base.css');\n\n/**\n * Document ready callback\n */\nlet documentReady = () => {\n  /**\n  * Initiate modules\n  * @type {Aside}\n  */\n  codex.notes.editor = new Editor();\n  codex.notes.aside = new Aside();\n  codex.notes.note = new Note();\n  codex.notes.user = new User();\n  codex.notes.statusBar = new StatusBar();\n  codex.notes.connectionObserver = new ConnectionObserver();\n\n  /**\n   * New note saving handler\n   */\n  window.ipcRenderer.on('note saved', (event, response) => {\n    codex.notes.note.addToMenu(response);\n  });\n};\n\nlet openExternalLink = function (event) {\n  if (event.target.tagName !== 'A' || !event.target.href) {\n    return;\n  }\n\n  if (!event.target.closest('.editor')) {\n    electron.shell.openExternal(event.target.href);\n    return;\n  }\n\n  if (event.metaKey || event.ctrlKey) {\n    electron.shell.openExternal(event.target.href);\n  }\n};\n\n/**\n * Application\n */\nmodule.exports = function () {\n  document.addEventListener('DOMContentLoaded', documentReady, false);\n  document.addEventListener('click', openExternalLink);\n\n  /**\n   * Allow access modules with codex.notes[module]\n   */\n  return {};\n}();\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/app.js","const SwipeDetector = require('./swipe-detector').default;\n\n/**\n * Aside swiper class\n * @property {object} CSS dictionary\n */\nexport default class AsideSwiper {\n\n  /**\n   * @constructor\n   * @param {Function} opened  - opening callback\n   * @param {Function} closed  - closing callback\n   */\n  constructor({opened, closed}) {\n    this.CSS = {\n      wrapper : 'aside-swiper',\n      toggled : 'aside-swiper--toggled',\n      left    : 'aside-swiper__left',\n      right   : 'aside-swiper__right'\n    };\n\n    this.wrapper = document.querySelector(`.${this.CSS.wrapper}`);\n    this.left = this.wrapper.querySelector(`.${this.CSS.left}`);\n    this.right = this.wrapper.querySelector(`.${this.CSS.right}`);\n\n    this.opened = opened || function () {};\n    this.closed = closed || function () {};\n\n    /**\n     * Allow to open/close by two-fingers swipe left/right\n     */\n    new SwipeDetector(this.wrapper, (directionRight) => {\n      if (directionRight) {\n        this.open();\n      } else {\n        this.close();\n      }\n    });\n  }\n\n  /**\n   * Swipe left menu, shows folder section\n   */\n  open() {\n    this.wrapper.classList.add(this.CSS.toggled);\n    this.opened();\n  }\n\n  /**\n   * Toggle off folder section\n   */\n  close() {\n    this.wrapper.classList.remove(this.CSS.toggled);\n    this.closed();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/aside-swiper.js","/**\n * Autoresizer module\n * Expands dynamically height of textareas\n */\n\n/**\n * @property elements - array of elements\n * @property {Function} addResizer - adds listeners\n * @property {Function} removeResizer - removes listeners\n * @property {Function} destroy - removes all elements and handlers\n */\nexport default class Autoresizer {\n\n  /**\n   * adds autoresize handler\n   * @param elements - elements that needs to expand\n   */\n  constructor(elements) {\n    this.elements = elements || [];\n\n    for(let i = 0; i < this.elements.length; i++) {\n      this.addResizer(this.elements[i]);\n    }\n  }\n\n  /**\n   * autoresizer for textareas\n   * @param {Element} el - element we want to expand\n   */\n  addResizer(el) {\n    if (el.value.trim()) {\n      el.style.height = el.scrollHeight + 'px';\n    } else {\n      el.style.height = 'auto';\n    }\n\n    el.addEventListener('keydown', this.enterKeyPressed, false);\n    el.addEventListener('input', this.resize.bind(this, el), false);\n  }\n\n  /**\n   * Prevent enter key pressing\n   * @param event\n   */\n  enterKeyPressed(event) {\n    if (event.keyCode === 13) {\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * Resize input\n   * @param el\n   */\n  resize(el) {\n    el.style.height = 'auto';\n    el.style.height = el.scrollHeight + 'px';\n  }\n\n  /**\n   * removes handlers from element\n   * @param {Element} el - element we want to clear from resizer\n   */\n  removeResizer(el) {\n    el.removeEventListener('keydown', this.enterKeyPressed);\n    el.removeEventListener('input', this.resize);\n  }\n\n  /**\n   * Destroyer function. Clears all elements\n   */\n  destroy() {\n    for(let i = 0; i < this.elements.length; i++) {\n      this.removeResizer(this.elements[i]);\n      this.elements[i].style.height = 'auto';\n    }\n\n    this.elements = [];\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/autoresizer.js","const Dialog = require('./dialog').default;\nconst $ = require('./dom').default;\nconst Validate = require('./utils/validate').default;\n\n/**\n * Folder Settings panel module\n *\n * @property {Boolean} opened - state\n */\nexport default class FolderSettings {\n\n  /**\n   * @constructor\n   */\n  constructor() {\n    this.toggler = $.get('js-folder-settings-toggler');\n    this.closeButton = $.get('js-close-folder');\n    this.removeFolderButton = $.get('js-delete-folder');\n    this.folderTitleInput = document.getElementsByName('folder-title')[0];\n    this.newMemberInput = document.getElementsByName('new-member')[0];\n    this.membersList = $.get('js-members-list');\n\n    this.toggler.addEventListener('click', () => {\n      this.toggle();\n    });\n\n    this.closeButton.addEventListener('click', () => {\n      this.close();\n    });\n\n    this.removeFolderButton.addEventListener('click', () => {\n      this.removeFolderClicked();\n    });\n\n    this.folderTitleInput.addEventListener('keydown', event => this.changeTitleKeydown(event) );\n    this.newMemberInput.addEventListener('keydown', event => this.inviteMemberKeydown(event) );\n  }\n\n  /**\n   * CSS dictionary\n   */\n  static get CSS() {\n    return {\n      panelOpenedModifier: 'folder-settings-opened'\n    };\n  }\n\n  /**\n   * Open panel and change state\n   */\n  open() {\n    document.body.classList.add(FolderSettings.CSS.panelOpenedModifier);\n    this.opened = true;\n\n    /**\n     * Fill Folder's title input\n     */\n    this.folderTitleInput.value = codex.notes.aside.currentFolder.title || '';\n  }\n\n  /**\n   * Close panel and change state\n   */\n  close() {\n    document.body.classList.remove(FolderSettings.CSS.panelOpenedModifier);\n    this.opened = false;\n  }\n\n  /**\n   * Shows/hide this.panel\n   */\n  toggle() {\n    if (this.opened) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  /**\n   * Handler for Remove Folder Button\n   */\n  removeFolderClicked() {\n    console.assert(codex.notes.aside.currentFolder, 'Cannot remove Folder because it is not open');\n\n    let result = codex.notes.aside.currentFolder.delete();\n\n    if (result) {\n      this.close();\n      codex.notes.aside.closeFolder();\n    }\n  }\n\n  /**\n   * Handler for Change Title input\n   * @param  {KeyboardEvent} event - keydowns\n   */\n  changeTitleKeydown(event) {\n    if (event.key !== 'Enter') {\n      return;\n    }\n\n    let input = event.target,\n        title = input.value.trim(),\n        id = codex.notes.aside.currentFolder._id;\n\n    if (!title) {\n      return;\n    }\n\n    /**\n     * Send request for renaming\n     * @type {object}\n     */\n    let result = window.ipcRenderer.sendSync('folder - change title', { id, title });\n\n    if (!result) {\n      Dialog.error('Folder renaming failed. Please, try again.');\n      return false;\n    }\n\n    /**\n     * Update title in the:\n     *  - folder header\n     *  - aside menu\n     */\n    codex.notes.aside.currentFolder.title = title;\n\n    /**\n     * Close folder settings\n     */\n    this.close();\n  }\n\n  /**\n   * Handler for New Member input\n   * @param {KeyboardEvent} event - keydowns\n   */\n  inviteMemberKeydown(event) {\n    if (event.key !== 'Enter') {\n      return;\n    }\n\n    let input = event.target,\n        email = input.value.trim(),\n        id = codex.notes.aside.currentFolder._id;\n\n    if (!email || !Validate.email(email)) {\n      return;\n    }\n\n    /**\n     * Send request for adding new collaborator\n     * @type {object}\n     */\n    let result = window.ipcRenderer.sendSync('folder - collaborator add', { id, email });\n\n    if (!result) {\n      Dialog.error('Error while adding a collaborator to the folder');\n      return false;\n    }\n\n    // Clear input field\n    input.value = '';\n\n    // Add item to list of Collaborators\n    let newMemberItem = $.make('P', [], {\n      innerHTML: email\n    });\n\n    $.append(this.membersList, newMemberItem);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/folder-settings.js","const $ = require('./dom').default;\nconst Dialog = require('./dialog').default;\n\n/**\n * Folders methods\n *\n * @typedef {Folder} Folder\n * @property {Number}    id                 - Folder's id\n * @property {string}    title              - Folder's title\n * @property {Array}     notes              - Notes list\n * @property {Element}   notesListWrapper   - Notes list holder\n */\nexport default class Folder {\n\n  /**\n   * Folder methods\n   *\n   * @param {Number} id     - Folder's id\n   * @param {string} title  - Folder's title\n   */\n  constructor(id, title) {\n    this._id = id;\n    this._title = title;\n\n    this.folderTitleElement = $.get('js-folder-title');\n\n    /**\n     * Load actual Folder's data\n     * @type {Object}\n     */\n    let folderData = window.ipcRenderer.sendSync('folder - get', this._id);\n\n    this.title = folderData.title;\n\n    codex.notes.aside.loadNotes(id)\n      .then( ({notes}) => {\n        this.notes = notes;\n      })\n      .then( () => this.clearNotesList() );\n\n    this.notesListWrapper = document.querySelector('[name=\"js-folder-notes-menu\"]');\n  }\n\n  /**\n   * Folder id getter\n   */\n  get id() {\n    return this._id;\n  }\n\n  /**\n   * Folder title getter\n   */\n  get title() {\n    return this._title;\n  }\n\n  /**\n   * Folder title setter\n   * @param {String} newTitle\n   */\n  set title(newTitle) {\n    this._title = newTitle;\n\n    /**\n     * Update in the Header\n     */\n    this.fillHeader();\n\n    /**\n     * Update in the Aside menu\n     */\n    codex.notes.aside.updateFolderTitleInMenu(this._id, this._title);\n  }\n\n  /**\n   * Fills folder header block\n   */\n  fillHeader() {\n    this.folderTitleElement.textContent = this._title;\n  }\n\n  /**\n   * Clear list if there is no one note\n   */\n  clearNotesList() {\n    this.notesListWrapper.innerHTML = '';\n  }\n\n  /**\n   * Delete folder\n   */\n  delete() {\n    if (Dialog.confirm('Are you sure you want to delete this folder?')) {\n      if (window.ipcRenderer.sendSync('folder - delete', this._id)) {\n        codex.notes.aside.removeFolderFromMenu(this._id);\n        codex.notes.note.clear();\n        return true;\n      }\n    }\n\n    Dialog.error('Folder removing failed');\n    return false;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/folder.js","/**\n * CodeX Note ShortCuts class\n * Handles keyDowns on Note.\n *\n * Used to create shortcuts on element\n */\n\n/**\n * List of key codes\n */\nconst keyCodes = {\n  '0' : 48,\n  '1' : 49,\n  '2' : 50,\n  '3' : 51,\n  '4' : 52,\n  '5' : 53,\n  '6' : 54,\n  '7' : 55,\n  '8' : 56,\n  '9' : 57,\n  'A' : 65,\n  'B' : 66,\n  'C' : 67,\n  'D' : 68,\n  'E' : 69,\n  'F' : 70,\n  'G' : 71,\n  'H' : 72,\n  'I' : 73,\n  'J' : 74,\n  'K' : 75,\n  'L' : 76,\n  'M' : 77,\n  'N' : 78,\n  'O' : 79,\n  'P' : 80,\n  'Q' : 81,\n  'R' : 82,\n  'S' : 83,\n  'T' : 84,\n  'U' : 85,\n  'V' : 86,\n  'W' : 87,\n  'X' : 88,\n  'Y' : 89,\n  'Z' : 90,\n  'BACKSPACE' : 8,\n  'ENTER'     : 13,\n  'ESCAPE'    : 27,\n  'LEFT'      : 37,\n  'UP'        : 38,\n  'RIGHT'     : 39,\n  'DOWN'      : 40,\n  'INSERT'    : 45,\n  'DELETE'    : 46\n};\n\nconst supportedCommands = {\n  'CMD' : ['CMD', 'CONTROL', 'COMMAND', 'WINDOWS', 'CTRL'],\n  'SHIFT' : [ 'SHIFT' ],\n  'ALT' : ['ALT', 'OPTION']\n};\n\n/**\n * @class ShortCuts\n * @classdesc Callback will be fired with two params:\n *   - event: standard keyDown param\n *   - target: element which registered on shortcut creation\n *\n * @typedef {ShortCut} ShortCut\n * @property {String} name - shortcut name\n * @property {Element} on - element that passed on shortcut creation\n * @property {Function} callback - custom user function\n */\nexport default class ShortCut {\n\n  /**\n   * Create new shortcut\n   * @param {ShortCut} shortcut\n   * @constructor\n   */\n  constructor(shortcut) {\n    this.commands = {};\n    this.keys = {};\n\n    this.parseShortcutName(shortcut.name);\n\n    this.element = shortcut.on;\n    this.callback = shortcut.callback;\n\n    this.executeShortcut = (event) => {\n      this.execute(event);\n    };\n    this.element.addEventListener('keydown', this.executeShortcut, false);\n  }\n\n  /**\n   * parses string to get shortcut commands in uppercase\n   * @param {String} shortcut\n   *\n   * @return {Array} keys\n   */\n  parseShortcutName(shortcut) {\n    shortcut = shortcut.split('+');\n\n    for (let key = 0; key < shortcut.length; key++) {\n      shortcut[key] = shortcut[key].toUpperCase();\n\n      if (shortcut[key].length > 1) {\n        for (let command in supportedCommands) {\n          if (supportedCommands[command].includes(shortcut[key])) {\n            this.commands[command] = true;\n          }\n        }\n      } else {\n        this.keys[shortcut[key]] = true;\n      }\n    }\n  }\n\n  /**\n   * Check all passed commands and keys before firing callback\n   * @param event\n   */\n  execute(event) {\n    let cmdKey = (event.ctrlKey || event.metaKey),\n        shiftKey = event.shiftKey,\n        altKey = event.altKey,\n        passed = {\n          'CMD': cmdKey,\n          'SHIFT': shiftKey,\n          'ALT': altKey\n        };\n\n    let command,\n        allCommandsPassed = true;\n\n    for (command in this.commands) {\n      allCommandsPassed = allCommandsPassed && passed[command];\n    }\n\n    let key,\n        allKeysPassed = true;\n\n    for (key in this.keys) {\n      allKeysPassed = allKeysPassed && ( event.keyCode === keyCodes[key] );\n    }\n\n    if (allCommandsPassed && allKeysPassed) {\n      this.callback.call(null, event);\n    }\n  }\n\n  /**\n   * Destroy shortcut: remove listener from element\n   */\n  remove() {\n    this.element.removeEventListener('keydown', this.executeShortcut);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/shortcut.js","/**\n * Two fingers swipe detection class\n */\nexport default class SwipeDetector {\n\n  /**\n  * @constructor\n  *\n  * @param {Element} el          - Element to handle swipe\n  * @param {Function} callback   - Callback for swipe event. Accepts {Boolean} directionRight parameter\n  *\n  *\n  * @property {Element} el\n  * @property {Function} callback\n  * @property {Boolean} swiped         -  Flag user to detect horisontal swipe by mousewheel\n  * @property {Timer} wheelTimeout     - Timer for detect swipe\n  */\n  constructor(el, callback) {\n    this.el = el;\n    this.callback = callback;\n    this.swiped = false;\n    this.wheelTimeout = null;\n\n    this.el.addEventListener('mousewheel', event => {\n      this.detectSwipe(event);\n    });\n  }\n\n  /**\n   * Detects two-fingers swipe and fires callback\n   * @fires this.callback\n   * @param {WheelEvent} event - mouse wheel\n   */\n  detectSwipe(event) {\n    /**\n     * Detect horisontal scroll\n     * @type {Boolean}\n     */\n    let isHorisontal = event.wheelDeltaY === 0;\n\n    /**\n     * Dont fire swipe event on small scrolls\n     * @type {Boolean}\n     */\n    const minimumDistance = 30;\n    let swipeEnoughLong = event.wheelDeltaX > minimumDistance || event.wheelDeltaX < -1 * minimumDistance;\n\n    if ( isHorisontal && swipeEnoughLong ) {\n      if (!this.swiped) {\n        this.swiped = true;\n\n        /**\n         * Pass directionRight parameter. True for right swipe, false for left swipe\n         */\n        this.callback(event.deltaX > 0);\n\n        this.wheelTimeout = window.setTimeout( () => {\n          this.swiped = false;\n        }, 1000);\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/swipe-detector.js","/**\n * Validate module\n */\nexport default class Validate {\n\n  /**\n   * Check for email validness\n   *\n   * @param {string} email\n   * @return {boolean}\n   */\n  static email(email) {\n    let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n    return re.test(email);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/javascripts/utils/validate.js"],"sourceRoot":""}